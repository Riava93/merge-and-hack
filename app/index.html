<!doctype html>
<html ng-app="mergeAndHack">
	<head>
		<meta charset="utf-8">
		<title>Game Jam Game</title>
		<meta name="description" content="">
		<meta name="viewport" content="width=device-width">
		<link rel="stylesheet" href="/app.css">
		<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
	</head>
	<body ng-controller="GameController">

		<div ng-if="game.board.state.current === game.board.state.GAME_INFO" class="getting-started">
			<h1>It's all come to this...</h1>

			<section class="game-details">
				<section class="about-game">
					<h2>About this game</h2>
					<p>
						Nam non turpis. Maecenas fermentum nibh in est. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Duis sagittis fermentum nunc. Nullam elementum erat. Quisque dapibus, augue nec dapibus bibendum, velit enim scelerisque sem, accumsan suscipit lectus
					</p>
					<p>
						Magnis dis parturient montes, nascetur ridiculus mus. Etiam egestas posuere metus. Aliquam erat volutpat. Donec non tortor. Vivamus posuere nisi mollis dolor. Quisque porttitor nisi ac elit. Nullam tincidunt ligula vitae nulla. Vivamus sit amet risus et ipsum viverra malesuada. Duis
					</p>
				</section>

				<section class="how-to">
					<h2>How to play</h2>

					<section class="objective">
						<h3>Your Objective</h3>
						<p>
							Quis justo id tortor accumsan tempus. Cras vitae magna. Nunc bibendum lacinia tellus. Quisque.
						</p>
					</section>

					<section class="rules-and-explanation">
						<ol>
							<!-- TODO: Fill in appropriate rules -->
							<h4 class="rules">Rules:</h4>
							<li>Testing</li>
							<li>Testing</li>
							<li>Testing</li>
						</ol>

						<p class="explanation">
							Quis, volutpat ac, sollicitudin sed, arcu. Aenean vel mauris. Mauris tincidunt. Nullam euismod odio at velit. Praesent elit purus, porttitor id, facilisis in, consequat ut, libero. Morbi imperdiet, magna quis ullamcorper malesuada, mi massa pharetra lectus, a pellentesque urna urna id
						</p>
					</section>
				</section>
			</section>

			<section class="continue-game">
				<button class="button" ng-click="chooseCorporation()">
					Get Started
				</button>
			</section>
		</div>

		<div class="chooseCorporation" ng-if="game.board.state.current === game.board.state.CHOOSE_CORP">
			<h1>
				Which Corporation would you like to play?
			</h1>

			<section class="corporations">
				<div class="corporation" ng-repeat="corp in game.board.players">
					<h4 class="corp-name">{{ corp.name }}</h4>

					<h4>Stats</h4>
					<ul>
						<li ng-repeat="(stat, value) in corp.stats">
							{{ stat }} : <strong>{{ value }}</strong>
						</li>
					</ul>

					<button class="button" ng-click="setPlayer(corp)">
						Choose
					</button>
				</div>
			</section>
		</div>

		<div class="info-box">
			<h3>Game Info</h3>
			Current player: {{game.board.players[game.board.turn].name}}
			<br />
			Current State: {{game.board.state.toString()}}
		</div>

		<div class="mega-corporation player-{{$index + 1}}" ng-repeat="corp in game.board.players">
			<h3>{{corp.name}}</h3>
			<dl>
				<dt><i class="fa fa-money"></i></dt>
				<dd>{{corp.cash}}</dd>
				<dd>
					<dl>
						<dt><i class="fa fa-bar-chart"></i></dt>
						<dd>{{corp.stats.product}}</dd>
						<dt><i class="fa fa-shield"></i></dt>
						<dd>{{corp.stats.security}}</dd>
						<dt><i class="fa fa-user-secret"></i></dt>
						<dd>{{corp.stats.espionage}}</dd>
					</dl>
				</dd>
			</dl>
			<h5>Subsidiaries</h5>
			<ul class="subsidiaries">
				<li class="subsidiary" ng-repeat="subsidiary in corp.subsidiaries">
					<i class="fa fa-{{subsidiary.icon}}"></i>
					<div class="subsidiary-info">
						<span>{{subsidiary.id}}</span>
					</div>
				</li>
			</ul>
		</div>

		<div class="event-card-piles">
			<div class="card-group" ng-repeat="cardGroup in game.board.cardGroups">
				<div class="card flipped-{{card.isFlipped}} retained-{{card.isRetained}} visible-{{card.isVisible}}" ng-repeat="card in cardGroup.allCards">
					<div class="front face" ng-click="selectEventCard($parent.$index)">
						<span>{{card.name}}</span>
					</div>
					<div class="back face">
						<i class="fa fa-{{cardGroup.icon}}"></i>
						<span>{{cardGroup.name}}</span>
					</div>
				</div>
			</div>
		</div>

		<div class="merge-or-hack modal" ng-if="game.board.state.current === game.board.state.TURN_DECIDING_MERGE_OR_HACK">
			<h3>Merge or hack?</h3>
			<button ng-click="chooseMerge()">Merge</button>
			<button ng-click="chooseHack()">Hack</button>
		</div>

		<div class="merger-option modal" ng-if="game.board.state.current === game.board.state.TURN_MERGING">
			<h3>Confirm merger</h3>
			<div class="subsidiary-option" ng-repeat="subsidiary in game.board.innovationPool.inPlayStack">
				<i class="fa fa-{{subsidiary.icon}}"></i>
				<div class="subsidiary-info">
					<span>{{subsidiary.name}}</span>
				</div>
			</div>
			<button ng-click="confirmMerger(true)">YES</button>
			<button ng-click="confirmMerger(false)">NOPE</button>
		</div>

		<div class="hack-option modal" ng-if="game.board.state.current === game.board.state.TURN_HACKING_SELECT">
			<h3>Who should we hack?</h3>
			<button class="hackable-corporation" ng-if="corp !== game.board.getCurrentPlayer()" ng-repeat="corp in game.board.players" ng-click="confirmHack(corp)">{{corp.name}}</button>
		</div>

		<div class="hack-puzzle modal" ng-if="game.board.state.current === game.board.state.TURN_HACKING">
			<h3>Hack your opponent</h3>
			<p>Get 3 success nodes in a row to succeed</p>
			<dl>
				<dt>Probability of success</dt>
				<dd>{{(9 - game.board.hackPuzzle.probability) / 9 | prettyPercent}}</dd>
				<dt>Tries remaining</dt>
				<dd>{{game.board.hackPuzzle.totalTurns}}</dd>
			</dl>
			<div class="puzzle-row" ng-repeat="row in game.board.hackPuzzle.cells_grid">
				<div class="puzzle-cell" ng-repeat="cell in row">
					<button ng-if="!cell.isRevealed" ng-click="revealPuzzleCell(cell.x, cell.y)">?</button>
					<span ng-if="cell.isRevealed">{{cell.value}}</span>
				</div>
			</div>
		</div>

		<div class="turn-results modal" ng-if="game.board.state.current === game.board.state.TURN_RESULT">
			<h3>Results:</h3>
			<ul>
				<li ng-repeat="message in game.board.turnRecap">{{ message }}</li>
			</ul>
			<button ng-click="confirmResults()">OK</button>
		</div>
		<script src="/app.js"></script>
	</body>
</html>
